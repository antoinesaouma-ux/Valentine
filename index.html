<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Veux-tu √™tre ma Valentine ? üíï</title>
  <style>
    :root {
      /* üé® PALETTE MODERNE MATE */
      --card-width: min(90vw, 650px);
      --card-height: min(92vh, 850px);
      
      --bg-dark: #0a0e27;
      --bg-darker: #060817;
      --card-bg: linear-gradient(145deg, #1a1f3a 0%, #0f1429 100%);
      --card-shadow: 0 30px 80px rgba(0, 0, 0, 0.7), 0 0 1px rgba(184, 148, 82, 0.3);
      --text-color: #e8e6e3;
      --accent-gold: #b89452;
      --accent-gold-bright: #d4af37;
      --btn-yes-bg: linear-gradient(135deg, #b89452 0%, #8b6f3e 100%);
      --btn-yes-hover: linear-gradient(135deg, #d4af37 0%, #b89452 100%);
      --btn-no-bg: linear-gradient(135deg, #2d3456 0%, #1a1f3a 100%);
      --btn-no-hover: linear-gradient(135deg, #3d4566 0%, #2d3456 100%);
      --font-romantic: 'Georgia', 'Palatino', serif;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: var(--font-romantic);
      background: radial-gradient(ellipse at top, var(--bg-dark) 0%, var(--bg-darker) 100%);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
      position: relative;
    }

    /* ‚≠ê CIEL √âTOIL√â DISCRET */
    .pixel-stars {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 1;
    }

    .pixel-star {
      position: absolute;
      width: 2px;
      height: 2px;
      background: rgba(255, 255, 255, 0.6);
      border-radius: 50%;
      box-shadow: 0 0 2px rgba(255, 255, 255, 0.4);
      animation: subtleTwinkle 3s ease-in-out infinite;
    }

    @keyframes subtleTwinkle {
      0%, 100% { 
        opacity: 0.3; 
        transform: scale(1);
      }
      50% { 
        opacity: 0.8; 
        transform: scale(1.3);
      }
    }

    /* üå† √âTOILE FILANTE DISCR√àTE */
    .shooting-star {
      position: fixed;
      width: 2px;
      height: 2px;
      background: white;
      border-radius: 50%;
      box-shadow: 0 0 4px 1px rgba(255, 255, 255, 0.6);
      pointer-events: none;
      z-index: 2;
      opacity: 0;
    }

    .shooting-star::after {
      content: '';
      position: absolute;
      top: 0;
      right: 2px;
      width: 50px;
      height: 1px;
      background: linear-gradient(90deg, 
        rgba(255,255,255,0.8) 0%, 
        rgba(255,255,255,0.3) 50%,
        transparent 100%);
    }

    @keyframes shoot {
      0% {
        opacity: 0;
        transform: translate(0, 0);
      }
      10% {
        opacity: 1;
      }
      90% {
        opacity: 0.6;
      }
      100% {
        opacity: 0;
        transform: translate(-400px, 300px);
      }
    }

    .card {
      width: var(--card-width);
      height: var(--card-height);
      background: var(--card-bg);
      border-radius: 24px;
      box-shadow: var(--card-shadow);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: clamp(20px, 4vw, 50px);
      position: relative;
      z-index: 10;
      border: 1px solid rgba(184, 148, 82, 0.15);
    }

    .romantic-text {
      text-align: center;
      color: var(--text-color);
      line-height: 1.8;
      font-size: clamp(1.1rem, 2.5vw, 1.5rem);
      font-style: italic;
      margin-bottom: clamp(30px, 5vh, 50px);
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
      max-width: 90%;
    }

    .romantic-text strong {
      color: var(--accent-gold-bright);
      font-weight: 600;
      text-shadow: 0 0 8px rgba(212, 175, 55, 0.4);
    }

    .teasing-message {
      color: var(--accent-gold-bright);
      font-size: clamp(0.95rem, 2vw, 1.2rem);
      font-style: italic;
      font-weight: 600;
      margin-bottom: 20px;
      text-align: center;
      min-height: 30px;
      display: none;
      text-shadow: 0 0 10px rgba(212, 175, 55, 0.4);
    }

    .buttons {
      display: flex;
      gap: clamp(15px, 3vw, 30px);
      flex-wrap: wrap;
      justify-content: center;
      align-items: center;
      width: 100%;
      max-width: 500px;
    }

    button {
      font-family: var(--font-romantic);
      font-size: clamp(1.1rem, 2.5vw, 1.4rem);
      font-weight: 600;
      padding: clamp(12px, 2vh, 18px) clamp(30px, 5vw, 50px);
      border: 2px solid transparent;
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.35s cubic-bezier(0.68, -0.55, 0.265, 1.55);
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4);
      letter-spacing: 0.5px;
      transform-origin: center;
    }

    #btnYes {
      background: var(--btn-yes-bg);
      color: var(--text-color);
      border-color: rgba(212, 175, 55, 0.3);
      transform: scale(1);
    }

    #btnYes:hover {
      background: var(--btn-yes-hover);
      box-shadow: 0 8px 30px rgba(184, 148, 82, 0.4);
      transform: scale(1.05) translateY(-2px);
      border-color: var(--accent-gold-bright);
    }

    #btnNo {
      background: var(--btn-no-bg);
      color: #9ca3af;
      border-color: rgba(157, 163, 175, 0.2);
      transition: all 0.3s ease, left 0.15s ease, top 0.15s ease;
    }

    #btnNo:hover {
      background: var(--btn-no-hover);
      color: var(--text-color);
      border-color: rgba(157, 163, 175, 0.4);
    }

    #btnNo.fleeing {
      position: fixed;
      z-index: 9999;
    }

    .confirmation {
      display: none;
      text-align: center;
      animation: appearScale 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    }

    @keyframes appearScale {
      0% {
        opacity: 0;
        transform: scale(0.5);
      }
      100% {
        opacity: 1;
        transform: scale(1);
      }
    }

    .confirmation h2 {
      font-size: clamp(2rem, 5vw, 3rem);
      color: var(--accent-gold-bright);
      margin-bottom: 20px;
      text-shadow: 0 0 20px rgba(212, 175, 55, 0.6);
    }

    .confirmation p {
      font-size: clamp(1.1rem, 2.5vw, 1.4rem);
      color: var(--text-color);
      line-height: 1.6;
      margin-bottom: 30px;
    }

    /* ‚úÖ GIF RECADR√â ET CENTR√â */
    .gif-container {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: 20;
      animation: fadeIn 0.6s ease-in;
      max-width: 90vw;
      max-height: 90vh;
      overflow: hidden;
      border-radius: 16px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
    }

    .gif-container img {
      display: block;
      width: auto;
      height: 400px; /* ‚úÖ Hauteur fixe */
      object-fit: cover; /* ‚úÖ Recadrage automatique */
      object-position: center 30%; /* ‚úÖ Focus sur le haut du GIF */
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translate(-50%, -50%) scale(0.9);
      }
      to {
        opacity: 1;
        transform: translate(-50%, -50%) scale(1);
      }
    }

    .cat-container {
      position: fixed;
      bottom: 0;
      pointer-events: none;
      image-rendering: pixelated;
      z-index: 100;
      transition: left 0.016s linear;
    }

    .cat-sprite {
      width: 192px;
      height: 192px;
      background-image: url('https://i.imgur.com/ZRegpgjl.png');
      background-size: 576px 384px;
      background-repeat: no-repeat;
      transform-origin: center;
      transition: transform 0.2s ease;
    }

    .cat-container.face-left .cat-sprite {
      transform: scaleX(-1);
    }

    .cat-container.face-right .cat-sprite {
      transform: scaleX(1);
    }

    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
      20%, 40%, 60%, 80% { transform: translateX(5px); }
    }

    @media (max-width: 600px) {
      .card {
        padding: 20px 15px;
      }
      .buttons {
        flex-direction: column;
        gap: 15px;
      }
      button {
        width: 90%;
        max-width: 280px;
      }
      .gif-container img {
        height: 300px; /* Plus petit sur mobile */
      }
    }
  </style>
</head>
<body>

  <!-- ‚≠ê CIEL √âTOIL√â DISCRET -->
  <div class="pixel-stars" id="pixelStars"></div>

  <!-- üå† √âTOILE FILANTE -->
  <div class="shooting-star" id="shootingStar"></div>

  <div class="card">
    <div class="romantic-text">
      ¬´ Si je devais choisir entre respirer et t'aimer,<br>
      j'utiliserais mon dernier souffle pour te dire <strong>je t'aime</strong>. ¬ª
    </div>

    <div class="teasing-message" id="teasingMessage"></div>

    <div class="question" id="question">
      <div class="buttons">
        <button id="btnYes">Oui üíï</button>
        <button id="btnNo">Non</button>
      </div>
    </div>

    <div class="confirmation" id="confirmation">
      <h2>Je savais que tu dirais oui ! üíñ</h2>
      <p>Pr√©pare-toi pour la plus belle des Saint-Valentin... üåπ‚ú®</p>
      
      <!-- ‚úÖ GIF RECADR√â -->
      <div class="gif-container" id="gifContainer">
        <img src="image/love-mochi.gif" alt="Love GIF" />
      </div>
    </div>
  </div>

  <script>
    const CONFIG = {
      NO_CLICKS_FOR_CATS: 3,
      NO_CLICKS_FOR_FLEE: 10,
      CAT_COUNT: 5,
      FEAR_RADIUS: 150,
      FLEE_SPEED: 2,
      WALK_SPEED: 1.5,
      CAT_SCALE: 3,
      FRAME_W: 32,
      FRAME_H: 32,
      FRAMES_PER_ROW: 6,
      FRAME_DELAY: 100,
      HOVER_TO_LEAVE: 3,
      OFFSCREEN_MARGIN: 200,
      
      TEASING_MESSAGES: [
        "Vraiment ? ü•∫",
        "Tu es s√ªr¬∑e ? ü§î",
        "Les chats vont √™tre d√©√ßus... üòø",
        "Allez, juste un petit oui ? üôè",
        "Je ne vais pas abandonner ! üí™",
        "C'est ton dernier mot ? üò¢",
        "M√™me les √©toiles sont tristes... ‚≠ê",
        "Tu r√©alises que je vais pleurer ? üò≠",
        "OK, les chats arrivent ! üê±",
        "Dernier essai... S'il te pla√Æt ? üíï"
      ],

      // ‚≠ê √âTOILES DISCR√àTES
      STAR_COUNT: 50, // Plus d'√©toiles mais tr√®s petites
      SHOOTING_STAR_INTERVAL: 10000 // Toutes les 10 secondes
    };

    const btnYes = document.getElementById('btnYes');
    const btnNo = document.getElementById('btnNo');
    const question = document.getElementById('question');
    const confirmation = document.getElementById('confirmation');
    const teasingMessage = document.getElementById('teasingMessage');
    const gifContainer = document.getElementById('gifContainer');

    let noClicks = 0;
    let cats = [];
    let mouseX = 0;
    let mouseY = 0;
    let animationFrameId = null;
    let fleeMode = false;

    // ‚≠ê CR√âER LES √âTOILES DISCR√àTES
    function createStars() {
      const container = document.getElementById('pixelStars');
      
      for (let i = 0; i < CONFIG.STAR_COUNT; i++) {
        const star = document.createElement('div');
        star.className = 'pixel-star';
        star.style.left = `${Math.random() * 100}%`;
        star.style.top = `${Math.random() * 100}%`;
        star.style.animationDelay = `${Math.random() * 3}s`;
        star.style.animationDuration = `${2 + Math.random() * 2}s`;
        container.appendChild(star);
      }
    }

    // üå† √âTOILE FILANTE
    function createShootingStar() {
      const star = document.getElementById('shootingStar');
      
      setInterval(() => {
        star.style.left = `${Math.random() * 40 + 60}%`;
        star.style.top = `${Math.random() * 30 + 10}px`;
        star.style.animation = 'none';
        
        setTimeout(() => {
          star.style.animation = 'shoot 1.2s ease-out';
        }, 10);
      }, CONFIG.SHOOTING_STAR_INTERVAL);
    }

    function init() {
      createStars();
      createShootingStar();

      document.addEventListener('mousemove', e => {
        mouseX = e.clientX;
        mouseY = e.clientY;
      });

      btnYes.addEventListener('click', () => {
        console.log('üíö R√©ponse : OUI !');
        question.style.display = 'none';
        teasingMessage.style.display = 'none';
        confirmation.style.display = 'block';
        
        // ‚úÖ Afficher le GIF apr√®s 0.5s
        setTimeout(() => {
          gifContainer.style.display = 'block';
        }, 500);
        
        if (animationFrameId) {
          cancelAnimationFrame(animationFrameId);
        }
        cats.forEach(cat => cat.el.remove());
        cats = [];
      });

      btnNo.addEventListener('click', () => {
        noClicks++;
        console.log(`üëÜ Clic sur Non : ${noClicks}`);
        
        if (noClicks <= CONFIG.TEASING_MESSAGES.length) {
          teasingMessage.textContent = CONFIG.TEASING_MESSAGES[noClicks - 1];
          teasingMessage.style.display = 'block';
        }

        if (noClicks === 8) {
          document.querySelector('.romantic-text').style.animation = 'shake 0.5s';
          setTimeout(() => {
            document.querySelector('.romantic-text').style.animation = '';
          }, 500);
        }

        if (noClicks === CONFIG.NO_CLICKS_FOR_CATS) {
          console.log('üê± Spawn des chats !');
          spawnCats();
          startCatAnimation();
        }

        if (noClicks === CONFIG.NO_CLICKS_FOR_FLEE && !fleeMode) {
          console.log('üèÉ Mode fuite activ√© !');
          fleeMode = true;
          btnNo.classList.add('fleeing');
          
          const rect = btnNo.getBoundingClientRect();
          btnNo.style.left = `${rect.left}px`;
          btnNo.style.top = `${rect.top}px`;
        }
      });
    }

    function spawnCats() {
      const rows = [0, 1];
      for (let i = 0; i < CONFIG.CAT_COUNT; i++) {
        const catDiv = document.createElement('div');
        catDiv.className = 'cat-container';
        
        const sprite = document.createElement('div');
        sprite.className = 'cat-sprite';
        catDiv.appendChild(sprite);
        
        document.body.appendChild(catDiv);

        const rowIndex = rows[Math.floor(Math.random() * rows.length)];
        const startX = Math.random() * (window.innerWidth - CONFIG.FRAME_W * CONFIG.CAT_SCALE);

        const cat = {
          el: catDiv,
          x: startX,
          vx: (Math.random() > 0.5 ? 1 : -1) * CONFIG.WALK_SPEED,
          frame: 0,
          frameTimer: 0,
          facing: 'right',
          hoverCount: 0,
          leaving: false,
          markedForRemoval: false,
          rowIndex: rowIndex,
          type: 'mobile'
        };

        cat.facing = (cat.vx > 0) ? 'right' : 'left';
        setFacing(cat);
        applyFrame(cat);

        cat.el.style.left = `${cat.x}px`;
        cat.el.addEventListener('mouseenter', () => {
          if (!cat.leaving) {
            cat.hoverCount++;
            console.log(`üê≠ Survol chat : ${cat.hoverCount}/${CONFIG.HOVER_TO_LEAVE}`);
            if (cat.hoverCount >= CONFIG.HOVER_TO_LEAVE) {
              console.log('üëã Chat part !');
              cat.leaving = true;
              cat.vx = (cat.x < window.innerWidth / 2) ? -CONFIG.WALK_SPEED : CONFIG.WALK_SPEED;
              cat.facing = (cat.vx > 0) ? 'right' : 'left';
              setFacing(cat);
              cat.type = 'mobile';
              applyFrame(cat);
            }
          }
        });

        cats.push(cat);
      }
    }

    function startCatAnimation() {
      let lastTime = performance.now();
      const frameDelay = CONFIG.FRAME_DELAY;

      function loop(currentTime) {
        const deltaTime = currentTime - lastTime;

        if (fleeMode) {
          const btnRect = btnNo.getBoundingClientRect();
          const btnCenterX = btnRect.left + btnRect.width / 2;
          const btnCenterY = btnRect.top + btnRect.height / 2;
          const dx = btnCenterX - mouseX;
          const dy = btnCenterY - mouseY;
          const dist = Math.sqrt(dx * dx + dy * dy);

          if (dist < 150) {
            const angle = Math.atan2(dy, dx);
            const moveX = Math.cos(angle) * 3;
            const moveY = Math.sin(angle) * 3;
            
            let newLeft = btnRect.left + moveX;
            let newTop = btnRect.top + moveY;

            const maxX = window.innerWidth - btnRect.width;
            const maxY = window.innerHeight - btnRect.height;

            newLeft = Math.max(0, Math.min(maxX, newLeft));
            newTop = Math.max(0, Math.min(maxY, newTop));

            btnNo.style.left = `${newLeft}px`;
            btnNo.style.top = `${newTop}px`;
          }
        }

        cats.forEach(cat => {
          if (cat.leaving) {
            cat.x += cat.vx;
            const margin = CONFIG.OFFSCREEN_MARGIN;
            if (cat.x < -margin || cat.x > window.innerWidth + margin) {
              cat.markedForRemoval = true;
              cat.el.remove();
              console.log('üê± Chat supprim√©');
              return;
            }
          } else {
            const distX = Math.abs(mouseX - cat.x);
            if (distX < CONFIG.FEAR_RADIUS) {
              const flee = (cat.x < mouseX) ? -CONFIG.FLEE_SPEED : CONFIG.FLEE_SPEED;
              cat.vx = flee;
              cat.facing = (flee > 0) ? 'right' : 'left';
              setFacing(cat);
              cat.x += cat.vx;
            } else {
              cat.x += cat.vx;
              const catW = CONFIG.FRAME_W * CONFIG.CAT_SCALE;
              if (cat.x <= 0) {
                cat.x = 0;
                cat.vx = CONFIG.WALK_SPEED;
                cat.facing = 'right';
                setFacing(cat);
              } else if (cat.x >= window.innerWidth - catW) {
                cat.x = window.innerWidth - catW;
                cat.vx = -CONFIG.WALK_SPEED;
                cat.facing = 'left';
                setFacing(cat);
              }
            }
          }

          cat.el.style.left = `${cat.x}px`;

          if (cat.type === 'mobile') {
            cat.frameTimer += deltaTime;
            if (cat.frameTimer >= frameDelay) {
              cat.frameTimer -= frameDelay;
              cat.frame = (cat.frame + 1) % CONFIG.FRAMES_PER_ROW;
              applyFrame(cat);
            }
          }
        });

        cats = cats.filter(c => !c.markedForRemoval);
        lastTime = currentTime;
        animationFrameId = requestAnimationFrame(loop);
      }

      animationFrameId = requestAnimationFrame(loop);
    }

    function applyFrame(cat) {
      const displayW = CONFIG.FRAME_W * CONFIG.CAT_SCALE;
      const displayH = CONFIG.FRAME_H * CONFIG.CAT_SCALE;
      
      const offsetX = -cat.frame * displayW;
      const offsetY = -cat.rowIndex * displayH;
      
      cat.el.querySelector('.cat-sprite').style.backgroundPosition = `${offsetX}px ${offsetY}px`;
    }

    function setFacing(cat) {
      if (cat.facing === 'left') {
        cat.el.classList.add('face-left');
        cat.el.classList.remove('face-right');
      } else {
        cat.el.classList.add('face-right');
        cat.el.classList.remove('face-left');
      }
    }

    init();
  </script>

</body>
</html>
