<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Chats qui fuient ğŸ±</title>

<style>
body {
  margin: 0;
  height: 100vh;
  background: #111;
  overflow: hidden;
  cursor: none;
}

/* ğŸ± BASE CHAT */
.cat {
  position: absolute;
  width: 32px;
  height: 32px;

  background-image: url("image/cat.png");
  background-repeat: no-repeat;
  image-rendering: pixelated;

  transform: scale(4);
  transform-origin: center;
}
</style>
</head>

<body>

<script>
/* âœ… CONSTANTES */
const frameW = 32;
const frameH = 32;

/* ğŸ–±ï¸ POSITION SOURIS */
let mouseX = window.innerWidth / 2;
document.addEventListener("mousemove", e => {
  mouseX = e.clientX;
});

/* âœ… ANIMATIONS */
const animations = {
  walk: {
    frames: [[0,4],[1,4],[2,4],[3,4],[4,4],[5,4]],
    speed: 140,
    move: 1.2
  },
  run: {
    frames: [[0,2],[1,2],[2,2],[3,2]],
    speed: 90,
    move: 2.2
  },
  sneak: {
    frames: [[0,5],[1,5],[2,5]],
    speed: 220,
    move: 0.6
  }
};

/* ğŸ± CRÃ‰ATION Dâ€™UN CHAT QUI FUIT */
function createScaredCat({ x, y, animation }) {
  const cat = document.createElement("div");
  cat.className = "cat";
  document.body.appendChild(cat);

  let posX = x;
  const posY = y; // âœ… Y FIXE
  let frame = 0;
  let dir = 1;

  const anim = animations[animation];

  /* ğŸï¸ ANIMATION SPRITE */
  setInterval(() => {
    const [col, row] = anim.frames[frame];
    cat.style.backgroundPosition =
      `-${col * frameW}px -${row * frameH}px`;

    frame += dir;
    if (frame === anim.frames.length - 1 || frame === 0) {
      dir *= -1;
    }
  }, anim.speed);

  /* ğŸƒâ€â™‚ï¸ FUITE GAUCHE / DROITE */
  setInterval(() => {
    const distance = posX - mouseX;

    if (Math.abs(distance) < 300) {
      if (distance < 0) {
        // souris Ã  droite â†’ fuit Ã  gauche
        posX -= anim.move;
        cat.style.transform = "scale(4) scaleX(-1)";
      } else {
        // souris Ã  gauche â†’ fuit Ã  droite
        posX += anim.move;
        cat.style.transform = "scale(4) scaleX(1)";
      }
    }

    /* ğŸ” limites Ã©cran */
    posX = Math.max(-50, Math.min(window.innerWidth - 50, posX));

    cat.style.left = posX + "px";
    cat.style.top = posY + "px"; // âœ… PAS DE MOUVEMENT VERTICAL
  }, 16);
}

/* âœ… 3 CHATS â€” Y DIFFÃ‰RENT MAIS IMMOBILE */
createScaredCat({ x: 200, y: 260, animation: "walk" });
createScaredCat({ x: 500, y: 340, animation: "run" });
createScaredCat({ x: 800, y: 420, animation: "sneak" });
</script>

</body>
</html>
