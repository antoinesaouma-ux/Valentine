<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<title>ðŸ’–</title>

<style>
/* =====================================================
   GLOBAL â€“ MODERNE / CLEAN
   ===================================================== */

:root {
  --glass-bg: rgba(255,255,255,0.75);
  --glass-border: rgba(255,255,255,0.35);
  --accent: #ff4d6d;
}

* {
  box-sizing: border-box;
}

html, body {
  margin: 0;
  height: 100%;
  font-family: "Inter", "Segoe UI", sans-serif;
  background: radial-gradient(circle at top, #fef1f4, #f7cbd3);
  overflow: hidden;
  display: flex;
  justify-content: center;
  align-items: center;
}

/* =====================================================
   FOND â€“ POUSSIÃˆRE + PARALLAXE
   ===================================================== */

#dust {
  position: fixed;
  inset: 0;
  z-index: -2;
}

#parallax {
  position: fixed;
  inset: -10%;
  background: radial-gradient(circle at center, rgba(255,255,255,0.35), transparent 60%);
  z-index: -1;
  transition: transform 0.15s ease-out;
}

/* =====================================================
   CARTE
   ===================================================== */

.card {
  width: min(90vmin, 420px);
  aspect-ratio: 1 / 1;
  padding: 28px;
  border-radius: 22px;
  background: var(--glass-bg);
  backdrop-filter: blur(18px);
  border: 1px solid var(--glass-border);
  box-shadow: 0 30px 60px rgba(0,0,0,0.15);
  text-align: center;
  position: relative;
  overflow: hidden;
}

/* =====================================================
   TEXTE
   ===================================================== */

.card p {
  margin: 0 0 14px;
  font-size: 1.15rem;
  color: #222;
}

.card p:first-child {
  font-style: italic;
  opacity: 0.85;
}

.card strong {
  font-size: 1.25rem;
}

/* =====================================================
   BOUTONS
   ===================================================== */

.buttons {
  margin-top: 26px;
}

button {
  padding: 12px 26px;
  border-radius: 999px;
  border: none;
  cursor: pointer;
  font-size: 1rem;
  font-weight: 500;
  transition: transform 0.15s ease, box-shadow 0.15s ease;
}

button:hover {
  transform: translateY(-1px);
}

#yesBtn {
  background: var(--accent);
  color: #fff;
  box-shadow: 0 8px 20px rgba(255,77,109,0.35);
}

#noBtn {
  background: #e0e0e0;
  color: #333;
  margin-left: 12px;
}

/* =====================================================
   LOVE MOCHI (OUI)
   ===================================================== */

.love {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 16px;
}

.love img {
  max-width: 70%;
  border-radius: 16px;
}

/* =====================================================
   CHATS (SPRITE SHEET)
   ===================================================== */

.cat {
  position: absolute;
  width: calc(var(--fw) * var(--scale));
  height: calc(var(--fh) * var(--scale));
  background-image: url("image/cat.png"); /* âœ… sprite ici */
  background-repeat: no-repeat;
  image-rendering: pixelated;
}
</style>
</head>

<body>

<canvas id="dust"></canvas>
<div id="parallax"></div>

<div class="card" id="card">
  <p>Je tâ€™aime non pour ce que tu es, mais pour ce que je deviens quand je suis avec toi.</p>
  <p><strong>Veux-tu Ãªtre ma Valentine&nbsp;?</strong></p>

  <div class="buttons" id="buttons">
    <button id="yesBtn">Oui</button>
    <button id="noBtn">Non</button>
  </div>
</div>

<script>
/* =====================================================
   CONFIG CHATS
   ===================================================== */
const FRAME_W = 64;
const FRAME_H = 64;
const FRAMES_PER_ROW = 8;
const TOTAL_FRAMES = 16;
const FPS = 10;
const SCALE = 1.4;

const FEAR_RADIUS = 150;
const WALK_SPEED = 1;
const FLEE_SPEED = 3;

/* ===================================================== */

document.documentElement.style.setProperty("--fw", FRAME_W + "px");
document.documentElement.style.setProperty("--fh", FRAME_H + "px");
document.documentElement.style.setProperty("--scale", SCALE);

const card = document.getElementById("card");
const yesBtn = document.getElementById("yesBtn");
const noBtn = document.getElementById("noBtn");
const buttons = document.getElementById("buttons");

let noCount = 0;
let catsSpawned = false;
let mouseX = 0;

window.addEventListener("mousemove", e => mouseX = e.clientX);

/* ===================== PARALLAXE ===================== */
const parallax = document.getElementById("parallax");
window.addEventListener("mousemove", e => {
  const x = (e.clientX / innerWidth - 0.5) * 18;
  const y = (e.clientY / innerHeight - 0.5) * 18;
  parallax.style.transform = `translate(${x}px, ${y}px)`;
});

/* ===================== OUI ===================== */
yesBtn.onclick = () => {
  card.innerHTML = `
    <div class="love">
      <img src="image/love-mochi.gif" alt="Love Mochi">
      <strong>Oui ðŸ’–</strong>
    </div>
  `;
};

/* ===================== NON ===================== */
noBtn.onclick = () => {
  noCount++;
  if (noCount >= 3 && !catsSpawned) {
    spawnCats();
    catsSpawned = true;
  }
};

/* ===================== CHATS ===================== */
const cats = [];

function spawnCats() {
  ["20%", "50%", "80%"].forEach((top, i) => {
    const el = document.createElement("div");
    el.className = "cat";
    el.style.top = top;
    el.style.left = "20px";

    const c = {
      el,
      x: 20,
      frame: 0,
      dir: 1,
      mobile: i === 1
    };

    card.appendChild(el);
    cats.push(c);
  });

  requestAnimationFrame(animateCats);
}

let last = 0;
function animateCats(t) {
  if (t - last > 1000 / FPS) {
    cats.forEach(c => {
      if (c.mobile) {
        const d = Math.abs(mouseX - (card.offsetLeft + c.x));
        c.x += d < FEAR_RADIUS
          ? (mouseX < card.offsetLeft + c.x ? FLEE_SPEED : -FLEE_SPEED)
          : WALK_SPEED * c.dir;
      }

      if (c.x < 0 || c.x > card.clientWidth - FRAME_W * SCALE) {
        c.dir *= -1;
      }

      c.el.style.left = c.x + "px";

      c.frame += c.dir;
      if (c.frame >= TOTAL_FRAMES || c.frame < 0) c.dir *= -1;

      const fx = (c.frame % FRAMES_PER_ROW) * FRAME_W;
      const fy = Math.floor(c.frame / FRAMES_PER_ROW) * FRAME_H;
      c.el.style.backgroundPosition = `-${fx}px -${fy}px`;
      c.el.style.transform = c.dir < 0 ? "scaleX(-1)" : "scaleX(1)";
    });
    last = t;
  }
  requestAnimationFrame(animateCats);
}

/* ===================== POUSSIÃˆRE ===================== */
const canvas = document.getElementById("dust");
const ctx = canvas.getContext("2d");
let w, h, particles = [];

function resize() {
  w = canvas.width = innerWidth;
  h = canvas.height = innerHeight;
}
window.addEventListener("resize", resize);
resize();

for (let i = 0; i < 80; i++) {
  particles.push({
    x: Math.random() * w,
    y: Math.random() * h,
    r: Math.random() * 1.6 + 0.4,
    v: Math.random() * 0.3 + 0.1
  });
}

function dust() {
  ctx.clearRect(0, 0, w, h);
  ctx.fillStyle = "rgba(255,255,255,0.6)";
  particles.forEach(p => {
    p.y -= p.v;
    if (p.y < 0) p.y = h;
    ctx.beginPath();
    ctx.arc(p.x, p.y, p.r, 0, Math.PI * 2);
    ctx.fill();
  });
  requestAnimationFrame(dust);
}
dust();
</script>

</body>
</html>
